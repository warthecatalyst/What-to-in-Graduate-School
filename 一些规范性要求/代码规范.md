# 华中科技大学实验室代码规范须知

**请注意，该规范中提到的任何例子都不是我对任何一个人的针对性言论，而是基于在阿里实习后学习到的很多平时学校开发注意不到的地方，分享给后续的师弟师妹们。**

## 为什么需要这个规范文档

实验室的同学本身的代码水平参差不齐的情况下，写出来的代码也是五花八门，千奇百怪的。所以我希望实验室的同学能够遵守一定的代码规范，让写出来的程序可扩展性更强，写出来的代码使得后续同学接手的难度也大大降低。因此，本文档以C++语言为例，给阅读该文档的同学

以及另一方面，希望工程的文档也能够齐全，比如我这个模块是完成一个什么样的功能，为什么要这个模块来定义这些功能，模块对应的方法论是什么(what, why, how)

## 代码规范
### 类名、变量名、函数名、方法名严禁使用缩写！！！
经过本科4年的学习，大家多多少少都明白代码规范中的一些初级知识。但是，我发现很多同学在代码命名这件事情上还是非常的随心所欲。一个典型的错误就是类名、变量名使用缩写。错误示范:hcRi，对于阅读该段代码的同学来说根本无法弄明白其到底是什么含义，其究竟代表了一个什么东西。(就是没办法了解what)

正确写法:horizontalCurveRoadInfo(平曲线道路信息)、CHorizontalCurveDetailInfo(平曲线的界面信息，由衷表扬师兄), 代码名本身就能够指明其存储的是什么内容，而且现在的ide非常智能，你多打出几个字母就能够自动跳出你定义的变量，所以根本不需要去定义一个短变量认为其节约了开发时间。

### 类的成员变量定义方法
我认为一个基本的方法论就是，类的某些私有变量不应该暴露给其他使用该类的其他实例。比如一个圆的半径，如果任何一个使用该圆的实例都能够随意定义其半径，本质上在面向对象设计中是一个非预期性的行为。因此，对于类的某些私有变量，应该定义其为私有，并提供getter和setter的注入方式。如下：

```C++
class Circle {
public:
    void setRadius(double radius) {
        this->radius = radius;
    }

    double getRadius() {
        return this.radius;
    }

private:
    double radius;
};
```

### 全局常量和类的公有静态常量
把常量单独拿出来说，是因为我发现很多人还是喜欢通过C语言宏定义的方式来定义一些全局的变量。这样的方式的可扩展性较差，而且我认为代码的可读性也比较差。相比来说，我更喜欢使用const定义全局的静态变量和类的公有静态变量。

```C++
const double PI = 3.1415926;

class Circle {
public:
    constexpr const static double PI = 3.1415926;
};
```

### 视图层和数据层分离
在我们开发的过程中，经常会有视图层和数据层的分离，此处的分离必须要做到完全彻底的分离，也就是数据层中只有数据，视图层中包含一个数据层的对象，然后数据层通过单例模式的方式进行获取。

```C++
class View {
public:
    View() {
        data = Data.getInstance();
    }
private:
    Data& data;
};

class Data {
public:
    static Data& getInstance() {
        static Data data;
        return data;
    }
    Data(const Data& data) = delete;
    Data operator=(const Data& data) = delete;

private:
    Data() {}
    ~Data() {}
    std::vector<int> datas;
}
```

## 文档规范
### 类定义文档
在一个类定义头文件，类的开头需要写上该类一个什么类型的对象;

如果定义的是一个实体类，可以标注，其完成了什么样的功能，在哪些模块使用了这个类型的对象;

如果定义的是一个工具类，可以把使用其的某些场景列举出来; 如下：

```C++
/*
    该类代表了一个圆类对象
    (可选) 其完成了xxx功能
    (可选) 在aaa,bbb等模块需要使用该对象
    (可选) 该类的使用方法：xxx
*/
class Circle {

};
```

### 类公有方法文档
在一个类定义头文件中，对于一眼无法看出的公有方法(一眼能看出的就是getter, setter等)，都需要对其公有方法写上文档

```C++
/*
    该类代表了一个圆类对象
    (可选) 其完成了xxx功能
    (可选) 在aaa,bbb等模块需要使用该对象
    (可选) 该类的使用方法：xxx
*/
class Circle {
public:
    // 获取圆的面积
    double getArea();
};
```





