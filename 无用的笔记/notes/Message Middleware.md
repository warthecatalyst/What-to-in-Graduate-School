# 消息中间件与Kafka
## 通用的消息中间件问题
## 为什么需要消息中间件，其作用是什么？
异步处理 - 相比于传统的串行、并行方式，提高了系统吞吐量。
应用解耦 - 系统间通过消息通信，不用关心其他系统的处理。
流量削锋 - 可以通过消息队列长度控制请求量；可以缓解短时间内的高并发请求。
日志处理 - 解决大量日志传输。
消息通讯 - 消息队列一般都内置了高效的通信机制，因此也可以用在纯的消息通讯。比如实现点对点消息队列，或者聊天室等。

简单来说主要就是解耦、异步和削峰

## 如果在架构中引入了MQ后可能存在哪些新的问题？
1、系统的可用性变低
2、系统的复杂程度变高
3、一致性问题

## Kafka相关问题
### 假设consumer去pull消息时发现pull不到，如何排查问题？
消费消息和位移不是原子操作。如果开启了自动位移提交，可能在消费消息前就前移了offset，然后因为网络问题消费失败，那下次pull就拉不到了，导致出现问题。

